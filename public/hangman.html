<html>
<head>
	<title>Urban Hangman</title>

	<link href="css/hangman.css" rel="stylesheet">
</head>
<body>
  <!-- breaking bad wrapper -->
  <div class="wrapper">
		<div id="cube">
			<div class="side" id="side1">
				<div class="topleft">55.06</div>
				<div class="topright"> -2<br> -3 </div>
				<div class="element">Cp</div>
				<div class="bottom1">26</div>
				<div class="bottom2">2-1-11-4</div>
			</div>
			<div class="side" id="side2">
				<div class="topleft">238.029</div>
				<div class="topright"> -1<br> +1<br> +5 </div>
				<div class="element">U</div>
				<div class="bottom1">92</div>
				<div class="bottom2">2-8-18-7</div>
			</div>
			<div class="side" id="side3">
				<div class="topleft">22.95</div>
				<div class="topright"> +1 </div>
				<div class="element">Na</div>
				<div class="bottom1">11</div>
				<div class="bottom2">2-4-1</div>
			</div>
			<div class="side" id="side4">
				<div class="topleft">1.008</div>
				<div class="topright"> +2<br> </div>
				<div class="element">H</div>
				<div class="bottom1">1</div>
				<div class="bottom2">2-8-18-7</div>
			</div>
			<div class="side" id="side5">
				<div class="topleft">1.22</div>
				<div class="topright"> +4 </div>
				<div class="element">Zr</div>
				<div class="bottom1">40</div>
				<div class="bottom2">2-8-18-7</div>
			</div>
			<div class="side" id="side6">
				<div class="topleft">107.07</div>
				<div class="topright"> +1</div>
				<div class="element">Ag</div>
				<div class="bottom1">47</div>
				<div class="bottom2">2-12-18-9</div>
			</div>
		</div>
		<div class="text rban">rban</div>
		<div class="text angman">angman</div>
	</div>
	<!-- end breaking bad banner -->
	<!-- begin game board -->
	<div class="gameboard">
		<div id="left">
			<div class="gameplay">	
				<a class="button box" href="#" id="play">PLAY</a>
				<div id="defbox">
					<h2 id="message"><h2>
					<p id="word"></p>
					<p id="definition"></p>
					<p id="usecase"></p>
				</div>
				<br>
				<a class="box letter" href="#">A</a>
				<a class="box letter" href="#">B</a>
				<a class="box letter" href="#">C</a>
				<a class="box letter" href="#">D</a>
				<a class="box letter" href="#">E</a>
				<a class="box letter" href="#">F</a>
				<a class="box letter" href="#">G</a>
				<a class="box letter" href="#">H</a>
				<a class="box letter" href="#">I</a>
				<a class="box letter" href="#">J</a>
				<a class="box letter" href="#">K</a>
				<a class="box letter" href="#">L</a>
				<a class="box letter" href="#">M</a>
				<a class="box letter" href="#">N</a>
				<a class="box letter" href="#">O</a>
				<a class="box letter" href="#">P</a>
				<a class="box letter" href="#">Q</a>
				<a class="box letter" href="#">R</a>
				<a class="box letter" href="#">S</a>
				<a class="box letter" href="#">T</a>
				<a class="box letter" href="#">U</a>
				<a class="box letter" href="#">V</a>
				<a class="box letter" href="#">W</a>
				<a class="box letter" href="#">X</a>
				<a class="box letter" href="#">Y</a>
				<a class="box letter" href="#">Z</a>
			</div>

		</div>
		<div id="right">
			<!-- create hangman css -->
			<div id="noose"></div>
			<div id="face"></div>
			<div id="body"></div>
			<div id="leftArm"></div>
			<div id="rightArm"></div>
			<div id="leftLeg"></div>
			<div id="rightLeg"></div>
		</div>
	</div>
	<script src="/js/jquery.js"></script>
	<script>
		var wordArray; 
		var checkWord; 
		// this function grabs a random word from urban dictionary
		function word(){
			$.ajax("/data/urban2.json").done(function(data){
				var urban = data.results.collection1;
	            var rand = Math.floor(Math.random()*urban.length);
	            // console.log(urban.length);
	            var randWord = (urban[rand]);
	            wordArray = [randWord.word.text, randWord.description, randWord.example];
	            createGuessBlocks(wordArray);
	            displayBox(wordArray);
	        }).fail(function(){
	        	console.log('unsuccessful');
	        })
		}

		// function to generate letters to fill in
		function createGuessBlocks(array){
			var gameWord = array[0].split("");

			$.each(gameWord, function(i, gameWord){
				// console.log(gameWord);
				if(gameWord == "-"){
					$("#right").append("<a class='box nonLetter' href='#'>-</a>");
				} else if (gameWord == " "){
					$("#right").append("<a class='box blankLetter' href='#'></a>");
				} else {
					$("#right").append("<a class='box guessLetter' href='#' data-letter=" + gameWord + "></a>");
				}
            }); 
			console.log(gameWord);
		}

		// function to display word description and example
		function displayBox(array){
			$('#word').html(array[0]);
			$('#definition').html("Definition: " + array[1]);
			$('#usecase').html(array[2]);
		}
		// function to add click listeners to all letters
		$(".letter").click(function(e){
			e.preventDefault();
			var inside = $(this).text();
			var btnLetter = $(this);
			// console.log(inside);
			checkLetter(inside, btnLetter);
			gameWin();
		})

		// function to check letter
		function checkLetter(string, element){
			var toCheck = $('.guessLetter')
			var arrayCheck = [];
			$.each(toCheck, function(i, toCheck){
				arrayCheck.push($(toCheck).data('letter').toUpperCase());
			}); 
			// console.log(arrayCheck);
			if ($.inArray(string, arrayCheck) != -1){
				$(element).css('background-color', 'green');
				$.each(toCheck, function(i, toCheck){
					var data = $(toCheck).data('letter').toUpperCase();
					if (string == data){
						$(toCheck).html(data);
						$(toCheck).addClass('filled')
					} 
				});
				// insert game end function here 
			} else {
				$(element).css('background-color', 'red');
				$(element).addClass('wrong');
				// insert function for hangman here
				hangman(); 
			}
		}
		// function to create hangman
		function hangman(){
			var length = $('.wrong').length; 
			$('#face').css('background', 'url(/img/face' + length + '.png) center');
			$('#face').css('background-size', 'cover');
			if (length == 6){
				$('#message').html('YOU LOSE');
				$('#message').addClass('lose') 
				$('#defbox').slideDown("slow"); 
				// function for game end here
			} 
		}

		$('#play').click(function(e){
			e.preventDefault();
			// display letters
			var letters = $('.letter'); 
			$.each(letters, function(i, letter){
				$(letter).animate({
					opacity: 1 
				}, 1000);
			});
			// display noose
			$('#noose').slideDown("slow");
			// create word
			word();
		})

		// function to check game win
		function gameWin(){
			var win = $('.guessLetter');
			var wordWin = $('.guessLetter').length;
			var wordCheck = 0;
			$.each(win, function(i, win){
				if($(win).hasClass('filled')){
					wordCheck += 1; 
				}
	
			}) 
			console.log(wordCheck);
			if (wordWin == wordCheck){
				$('#message').html('YOU WIN!')
				$('#message').addClass('win') 
				$('#defbox').slideDown("slow");
			}

		}

		// track wins and losses





	</script>
</body>
</html>